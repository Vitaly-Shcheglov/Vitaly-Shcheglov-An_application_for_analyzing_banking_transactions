# Проект "Приложение для анализа банковских операций" 

## Описание
Приложение для анализа транзакций, которые находятся в Excel-файле. Приложение будет генерировать JSON-данные для веб-страниц, формировать Excel-отчеты, а также предоставлять другие сервисы.

## Реализация функций
В проекте реализовано несколько функций для приложения:

- **В модуле serrvises** реализована:
  - Функция для поиска номеров телефонов — `search_transactions`.

### Как работает функция
- **Функция `search_transactions`** возвращает JSON со всеми транзакциями, содержащими в описании мобильные номера.

- **В модуле reports** реализована:
  - Функция для расчета средних трат — `spending_by_workday`.

### Как работает функция
- **Функция `spending_by_workday`** принимает на вход: датафрейм с транзакциями, опциональную дату. Если дата не передана, то берется текущая дата. Функция выводит средние траты в рабочий и в выходной день за последние три месяца (от переданной даты).

- **В модуле views** реализована:
  - Функция обработки собыитий — `events_page`.

### Как работает функция
- **Функция `events_page`** принимает на вход строку с датой и второй необязательный параметр — диапазон данных и возвращает JSON-ответ.

- **В модуле main** реализованы:
- Функция  для запуска процесса поиска телефонных номеров — `main_transactions`.
- Функция для обработки событий — `main_events`.

### Как работают функции
- **Функция `main_transactions`** запускает поиск телефонных номеров в файле.
- **Функция `main_events`** запускает обработку событий из файла.


## Установка
1. Клонирование репозитория 
```git clone https://github.com/Vitaly-Shcheglov/An_application_for_analyzing_banking_transactions.git```

2. Запуск скрипта для демонстрации возможностей 


## Тестирование

В ходе тестирования кода был выполнен ряд проверок и отладки отдельных модулей:

### Модуль serrvises

#### Функция test_read_transactions:
- **Тестирует функцию read_transactions**:Использует mock для имитации чтения данных из Excel файла и проверяет,что функция корректно возвращает ожидаемые данные.

#### Функция test_extract_phone_numbers:
- **Тестирует функцию extract_phone_numbers**:Проверяет, что функция правильно извлекает уникальные номера телефоновиз списка транзакций.

### Модуль reports

#### Функция test_spending_by_workday:
- **Тестирует функцию spending_by_workday** с обычными данными: Проверяет, что функция правильно считает количество рабочих дней и сумму расходов.

#### Функция test_spending_by_workday_no_transactions:
- **Тестирует функцию spending_by_workday**, когда не переданы транзакции: Проверяет, что функция возвращает 0 рабочих дней и сумму расходов.

#### Функция test_spending_by_workday_with_nan:
- **Тестирует функцию  spending_by_workday** с данными, содержащими Na: Проверяет, что функция правильно игнорирует NaN значения и считает рабочие дни и сумму расходов.

#### Функция test_spending_by_workday_fixture:
- **Тестирует функцию spending_by_workday** с использованием фикстуры:Проверяет, что функция правильно обрабатывает транзакции, переданные через фикстуру.

### Модуль views

#### Функция test_events_page_valid_data:
- **Тестирует функцию events_page** с корректными данными: Проверяет, что функция правильно считает общее количество событий иколичество событий по категориям.

#### Функция test_events_page_empty_dataframe:
- **Тестирует функцию events_page** с пустым DataFrame: Проверяет, что функция возвращает 0 событий и пустой словарь категорий,когда передается пустой DataFrame.

#### Функция test_events_page_missing_columns:
- **Тестирует функцию events_page** с отсутствующими обязательными колонками: Проверяет, что функция вызывает KeyError, если в переданном DataFrame отсутствуют обязательные колонки.

#### Функция test_events_page_invalid_data_format:
- **Тестирует функцию events_page** с некорректным форматом данных: Проверяет, что функция игнорирует некорректные значения и правильно считает количество событий и категорий.
